01.Spring IOC/DI概念

[TOC]

### 1.IOC容器

​		如果合作对象的引用或者依赖关系的管理由具体对象来完成，会导致代码的高度耦和和可测试性的降低，这对负责的面向对象系统的设计是非常不利的。

​		在面向对象系统中，对象封装了数据和对数据的处理，对象的依赖关系常常体现在对数据和方法的依赖上。这些依赖关系可以通过把对象的依赖注入交给框架或IOC容器来完成，这种从具体对象手中交出控制的做法是非常有价值的，它可以在解耦代码的同时提高代码的可测试性。

​		依赖控制反转的实现由很多中方式。在Spring中，IOC容器是实现这个模式的载体，它可以在对象生成或初始化时直接将数据注入到对象中，也可以通过将对象引用注入到对象数据域中的方式来注入对方法调用的依赖。这种依赖注入是可以递归的，对象被逐层注入。就此而言，这种方案有一种完整而简洁的美感，它把对象的依赖关系有序地建立起来，简化了对象依赖关系的管理，在很大程度上简化了面向对象系统的复杂性。

​		*应用控制反转后，当对象被创建时，有一个调控系统内的所有对象的外界实体将其所依赖的对象的引用传递给它，即依赖被注入到对象中。* **所以，控制反转是关于一个对象如何获取它所依赖的对象的引用，在这里，反转指的是责任的反转。**

​		我们可以认为上面提到的调控系统是应用平台，或者更具体的说是IOC容器。通过使用IOC容器，对象依赖关系的管理被反转了，转到IOC容器中来了，对象之间的相互依赖关系由IOC容器进行管理，并由IOC容器完成对象的注入。这样就很大程度上简化了应用的开发，把应用从复杂的对象依赖关系管理中解放出来。简单地说，因为很多对象依赖关系的建立和维护并不需要和系统运行状态由很强的关联性，所以可以把面向对象编程中需要执行的诸如新建对象、为对象引用赋值等操作交由容器统一完成。这样一来，这些散落在不同代码中的功能相同的部分就集中成为容器的一部分。

#### 1.1 Spring Ioc应用场景

​		在Spring中，Spring Ioc提供了一个基本的JavaBean容器，通过IoC模式管理依赖关系，并通过依赖注入和AOP切面增强了为JavaBean这样的POJO对象赋予事务管理、生命周期管理等基本功能。

​		在应用开发中，以应用开发人员的身份设计组件时，往往需要引用和调用其他组件的服务，这种依赖关系如果固化在组件设计中，就会造成依赖关系的僵化和维护难度的增加，这个时候，如果使用IoC容器，把资源获取的方向反转，让IoC容器主动管理这些依赖关系，将这些依赖关系注入到组件中，那么会让这些依赖关系的适配和管理更加灵活，spring常用的三种注入方式：

* 接口注入

* setter注入（Spring主要注入方式）

* 构造器注入（Spring主要注入方式）

  ​	另一方面，在应用管理依赖关系时，可以通过IoC容器将控制进行反转，在反转的实现中，如果能通过可读的文本来进行配置，并且还能通过工具对这些配置信息进行可视化的管理和阅览，那么肯定是能够提高对组件关系的管理水平，并且如果耦合关系需要变动，并不需要重新修改和编译Java源代码，这符合在面向对象设计中的开闭原则，并且能够提高组件系统设计的灵活性，同时。







